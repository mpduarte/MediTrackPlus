2024-12-01 02:53:52,907 - INFO - [__main__] - === Starting Deployment Process ===
2024-12-01 02:53:52,907 - INFO - [__main__] - Deployment ID: 20241201_025352
2024-12-01 02:53:52,907 - INFO - [__main__] - Performing initial dependency check...
2024-12-01 02:53:52,908 - INFO - [__main__] - === Checking Service Dependencies ===
2024-12-01 02:53:53,266 - INFO - [__main__] - Database connection: OK
2024-12-01 02:53:53,266 - INFO - [__main__] - File system access: OK
2024-12-01 02:53:53,267 - INFO - [__main__] - Port 3000 is available
2024-12-01 02:53:53,267 - INFO - [__main__] - Environment variables: OK
2024-12-01 02:53:53,267 - INFO - [__main__] - === Dependencies Status Summary ===
2024-12-01 02:53:53,267 - INFO - [__main__] - Database: ✓
2024-12-01 02:53:53,267 - INFO - [__main__] - File System: ✓
2024-12-01 02:53:53,267 - INFO - [__main__] - Port Availability: ✓
2024-12-01 02:53:53,268 - INFO - [__main__] - Environment: ✓
2024-12-01 02:53:53,268 - INFO - [__main__] - === Executing: Checking environment variables ===
2024-12-01 02:53:53,268 - INFO - [__main__] - Started at: 02:53:53
2024-12-01 02:53:53,268 - INFO - [__main__] - All required environment variables are set
2024-12-01 02:53:53,268 - INFO - [__main__] - Completed at: 02:53:53
2024-12-01 02:53:53,268 - INFO - [__main__] - === Executing: Verifying database connection ===
2024-12-01 02:53:53,268 - INFO - [__main__] - Started at: 02:53:53
2024-12-01 02:53:53,269 - INFO - [__main__] - Verifying database connection...
2024-12-01 02:53:53,616 - INFO - [__main__] - Database connection successful
2024-12-01 02:53:53,616 - INFO - [__main__] - Completed at: 02:53:53
2024-12-01 02:53:53,616 - INFO - [__main__] - === Executing: Setting up database ===
2024-12-01 02:53:53,617 - INFO - [__main__] - Started at: 02:53:53
2024-12-01 02:53:53,617 - INFO - [__main__] - Setting up database...
2024-12-01 02:53:54,924 - INFO - [__main__] - Acquired application context
2024-12-01 02:53:54,925 - INFO - [__main__] - Database connection verified
2024-12-01 02:53:55,322 - INFO - [__main__] - Database tables creation initiated
2024-12-01 02:53:55,493 - INFO - [__main__] - Found tables: ['user', 'inventory_log', 'medication', 'consumption', 'prescription']
2024-12-01 02:53:55,917 - INFO - [__main__] - Table user columns: ['id', 'username', 'email', 'password_hash']
2024-12-01 02:53:56,133 - INFO - [__main__] - Table medication columns: ['id', 'name', 'dosage', 'frequency', 'current_stock', 'user_id', 'created_at', 'scheduled_time', 'max_daily_doses']
2024-12-01 02:53:56,344 - INFO - [__main__] - Table inventory_log columns: ['id', 'medication_id', 'quantity_change', 'operation_type', 'timestamp']
2024-12-01 02:53:56,557 - INFO - [__main__] - Table consumption columns: ['id', 'medication_id', 'taken_at', 'quantity', 'scheduled_time', 'status']
2024-12-01 02:53:56,769 - INFO - [__main__] - Table prescription columns: ['id', 'medication_id', 'file_name', 'file_path', 'upload_date', 'expiry_date', 'notes']
2024-12-01 02:53:56,769 - INFO - [__main__] - All required tables and structures verified
2024-12-01 02:53:56,769 - INFO - [__main__] - Completed at: 02:53:56
2024-12-01 02:53:56,769 - INFO - [__main__] - === Executing: Creating upload directories ===
2024-12-01 02:53:56,769 - INFO - [__main__] - Started at: 02:53:56
2024-12-01 02:53:56,769 - INFO - [__main__] - Creating upload directories...
2024-12-01 02:53:56,770 - INFO - [__main__] - Created directory: static/uploads
2024-12-01 02:53:56,770 - INFO - [__main__] - Created directory: static/uploads/prescriptions
2024-12-01 02:53:56,770 - INFO - [__main__] - Completed at: 02:53:56
2024-12-01 02:53:56,770 - INFO - [__main__] - === Executing: Starting Flask application ===
2024-12-01 02:53:56,770 - INFO - [__main__] - Started at: 02:53:56
2024-12-01 02:53:56,770 - INFO - [__main__] - Starting Flask application...
2024-12-01 02:53:58,771 - ERROR - [__main__] - Flask application failed to start
2024-12-01 02:53:58,771 - ERROR - [__main__] - stdout:  * Serving Flask app 'app'
 * Debug mode: on

2024-12-01 02:53:58,771 - ERROR - [__main__] - stderr: Address already in use
Port 3002 is in use by another program. Either identify and stop that program, or start the server with a different port.

2024-12-01 02:53:58,772 - ERROR - [__main__] - Step failed: Starting Flask application
2024-12-01 02:53:58,772 - ERROR - [__main__] - === Deployment Failed ===
2024-12-01 02:53:58,772 - ERROR - [__main__] - Failed Steps:
2024-12-01 02:53:58,772 - ERROR - [__main__] - ✗ Starting Flask application
2024-12-01 02:53:58,772 - ERROR - [__main__] - 
Please check the detailed logs in debug_20241201_025358.log
